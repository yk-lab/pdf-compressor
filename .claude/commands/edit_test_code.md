# テストコード作成・修正コマンド

@CLAUDE.md に基づいてテストコードを作成・修正してください

## 重要な指針

1. **こまめな実行**: 作成したテストコードは小さな単位でこまめに実行して手戻りをなるべく発生させないようにそして素早く実装できるように意識してください
2. **既存コード参考**: テストコードの実装方法は他のテストコードが参考になると思います
3. **カバレッジ目標**: patch coverageで80%以上を達成することを目標とする

## テスト作成の流れ

1. 対象ファイルの現在のカバレッジを確認 (`pnpm test:unit`)
2. カバーされていない関数・分岐を特定
3. 小さな単位でテストケースを作成
4. 都度 `pnpm test-dev -- <filename>` で動作確認
5. 全体のテストを実行して影響がないか確認

## よくある注意点

- **グローバルモックの復元**: Image, URL, document等のグローバルオブジェクトをモックした場合は、必ず元の実装を保存してテスト後に復元する
- **再帰呼び出しの回避**: createElement等をモックする際は、元の実装を使って再帰を避ける
- **非同期処理**: Promise/async-awaitを適切に使用し、テストの完了を待つ
- **Vue コンポーネント**: `@vue/test-utils`のmount/shallowMountを使用し、nextTickで描画を待つ
